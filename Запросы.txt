/******************************************************************************************/
select * from restaurant.dishes;

select * from restaurant.dishes
where id = ?;
/******************************************************************************************/
select * from restaurant.users
join restaurant.user_authorities on users.id = user_authorities.user_id;

select * from restaurant.users
join restaurant.user_authorities on users.id = user_authorities.user_id
where username = ?;

select * from restaurant.users
join restaurant.user_authorities on users.id = user_authorities.user_id
where id = ?;

select * from restaurant.users
join restaurant.user_authorities on users.id = user_authorities.user_id
where authorities =?;
/******************************************************************************************/
select * from restaurant.orders o,restaurant.orders_order_units oou,restaurant.order_units ou, restaurant.dishes d, restaurant.users u, restaurant.user_authorities ua
where ua.user_id=u.id and u.id = o.user_id and o.id = oou.order_id and oou.order_units_id=ou.id and ou.dish_id = d.id and o.user_id=?;

select * from restaurant.orders o,restaurant.orders_order_units oou,restaurant.order_units ou, restaurant.dishes d, restaurant.users u, restaurant.user_authorities ua
where ua.user_id=u.id and u.id = o.user_id and o.id = oou.order_id and oou.order_units_id=ou.id and ou.dish_id = d.id and o.id=?;

select * from restaurant.orders o,restaurant.orders_order_units oou,restaurant.order_units ou, restaurant.dishes d, restaurant.users u, restaurant.user_authorities ua
where ua.user_id=u.id and u.id = o.user_id and o.id = oou.order_id and oou.order_units_id=ou.id and ou.dish_id = d.id and o.status=3;
/******************************************************************************************/
select orders.id as oder_id,
       accepted,
       created,
       paid,
       ready,
       status,
       order_id,
       order_units.id as order_unit_id,
       quantity,
       dishes.id as dish_id,
       dishes.name_en as dish_name_en,
       dishes.name_ua as dish_name_ua,
       portion,
       price,
       users.id as user_id,
       funds,
       users.name_en as user_name_en,
       users.name_ua as user_name_ua ,
       orders_number,
       orders_total_cost,
       password,
       registration_date,
       username,
       authorities
from restaurant.orders
join restaurant.orders_order_units on orders.id = orders_order_units.order_id
join restaurant.order_units on orders_order_units.order_units_id = order_units.id
join restaurant.dishes on order_units.dish_id = dishes.id
join restaurant.users on orders.user_id = users.id
join restaurant.user_authorities on users.id = user_authorities.user_id
where orders.user_id=?

select orders.id as oder_id,
       accepted,
       created,
       paid,
       ready,
       status,
       order_id,
       order_units.id as order_unit_id,
       quantity,
       dishes.id as dish_id,
       dishes.name_en as dish_name_en,
       dishes.name_ua as dish_name_ua,
       portion,
       price,
       users.id as user_id,
       funds,
       users.name_en as user_name_en,
       users.name_ua as user_name_ua ,
       orders_number,
       orders_total_cost,
       password,
       registration_date,
       username,
       authorities
from restaurant.orders
join restaurant.orders_order_units on orders.id = orders_order_units.order_id
join restaurant.order_units on orders_order_units.order_units_id = order_units.id
join restaurant.dishes on order_units.dish_id = dishes.id
join restaurant.users on orders.user_id = users.id
join restaurant.user_authorities on users.id = user_authorities.user_id
where order_id=?;

select orders.id as oder_id,
       accepted,
       created,
       paid,
       ready,
       status,
       order_id,
       order_units.id as order_unit_id,
       quantity,
       dishes.id as dish_id,
       dishes.name_en as dish_name_en,
       dishes.name_ua as dish_name_ua,
       portion,
       price,
       users.id as user_id,
       funds,
       users.name_en as user_name_en,
       users.name_ua as user_name_ua ,
       orders_number,
       orders_total_cost,
       password,
       registration_date,
       username,
       authorities
from restaurant.orders
join restaurant.orders_order_units on orders.id = orders_order_units.order_id
join restaurant.order_units on orders_order_units.order_units_id = order_units.id
join restaurant.dishes on order_units.dish_id = dishes.id
join restaurant.users on orders.user_id = users.id
join restaurant.user_authorities on users.id = user_authorities.user_id
where status=?;
/******************************************************************************************/
insert into restaurant.orders (id, accepted, created, paid, ready, status, user_id) values(nextval('restaurant.order_id_seq'),);
insert into restaurant.order_units (id, quantity, dish_id) values ();
insert into restaurant.orders_order_units (order_id, order_units_id) values (10,currval('restaurant.order_units_id_seq'));
insert into restaurant.users (id, account_non_expired, account_non_locked, credentials_non_expired, enabled, funds, name_en, name_ua, orders_number, orders_total_cost, password, registration_date, username) VALUES (nextval('restaurant.user_id_seq'));
insert into restaurant.user_authorities (user_id, authorities) values (,0);

update restaurant.users set funds =?, orders_number=?, orders_total_cost=? where id=?;
update restaurant.orders set accepted=?, paid=?, ready=?, status=? where id=?;

